---
import '../styles/global.css';
import { ViewTransitions } from 'astro:transitions';

interface Props {
	title: string;
}

const { title } = Astro.props;
---

<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>{title} | GetNexo</title>
  <meta name="description" content="Assistente de vendas 24h com IA, WhatsApp e automação. Zero nuvem cara." />
  <meta name="robots" content="index, follow" />
  
  <!-- Open Graph -->
  <meta property="og:type" content="website" />
  <meta property="og:url" content={new URL(Astro.url.pathname, Astro.site)} />
  <meta property="og:title" content={title} />
  <meta property="og:description" content="A Máquina de Vendas Autônoma com IA Local." />
  <meta property="og:image" content="https://getnexo.com.br/assets/og-poster.jpg" />

  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image" />
  <meta property="twitter:url" content={new URL(Astro.url.pathname, Astro.site)} />
  <meta property="twitter:title" content={title} />
  <meta property="twitter:description" content="A Máquina de Vendas Autônoma com IA Local." />
  <meta property="twitter:image" content="https://getnexo.com.br/assets/og-poster.jpg" />

  <link rel="canonical" href={new URL(Astro.url.pathname, Astro.site)} />
  <link rel="manifest" href="/manifest.json" />
  <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
  
  <ViewTransitions />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet" />
  <!-- CSP básico + partículas -->
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com;" />
  <style is:global>
    body { overflow-x: hidden; }
    .particles-canvas { position: fixed; inset: 0; pointer-events: none; z-index: -1; }
    /* Custom Scrollbar & Selection */
    ::-webkit-scrollbar { width: 10px; }
    ::-webkit-scrollbar-track { background: #05080f; }
    ::-webkit-scrollbar-thumb { background: #00d4ff; border-radius: 5px; }
    ::-webkit-scrollbar-thumb:hover { background: #00ff9d; }

    ::selection { background: #00d4ff; color: #000; }

    .text-gradient {
        background-image: var(--accent-gradient);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-size: 400%;
        background-position: 0%;
    }
  </style>
</head>
<body>
  <canvas class="particles-canvas" id="particles"></canvas>

<header style="background: rgba(10, 14, 23, 0.9); backdrop-filter: blur(12px); border-bottom: 1px solid #00d4ff30;">
  <a href="/" class="logo" style="color: #00d4ff;">GETNEXO</a>
  <nav style="gap: 2rem;">
    <a href="/" style="color: #e2e8f0;">Início</a>
    <a href="/assistente-vendas-whatsapp" style="color: #e2e8f0; transition: color 0.3s;">Assistente de Vendas WhatsApp</a>
    <a href="/como-funciona" style="color: #e2e8f0;">Como Funciona</a>
    <a href="/blog" style="color: #e2e8f0;">Blog</a>
    <a href="/admin" style="color: #e2e8f0;">Admin</a>
    <a href="/api" style="color: #e2e8f0;">API</a>
    <a href="/privacidade" style="color: #e2e8f0;">Privacidade</a>
    <a href="https://chat.getnexo.com.br" class="btn-cta" style="
      color: #00ff9d;
      border: 2px solid #00ff9d;
      border-radius: 50px;
      padding: 0.5rem 1.5rem;
      font-weight: 800;
      transition: all 0.3s;
      animation: pulse 2s infinite;"
      onmouseover="this.style.background='#00ff9d30'; this.style.transform='translateY(-2px)'"
      onmouseout="this.style.background='transparent'; this.style.transform='translateY(0)'"
    >Falar com o Agente Agora →</a>
  </nav>
</header>
<script is:inline>
  const style = document.createElement('style');
  style.innerHTML = `
    @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.7; } }
  `;
  document.head.append(style);
</script>

  <main>
    <slot />
  </main>

  <footer>
    <p>© {new Date().getFullYear()} GetNexo. Todos os direitos reservados.</p>
    <p>Dados blindados (AES-256) + IA 100% local</p>
  </footer>

  <script is:inline>
    // Partículas simples no mouse (sem dependência externa)
    const canvas = document.getElementById('particles');
    const ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    window.addEventListener('resize', () => {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    });

    const particles = [];
    const mouse = { x: null, y: null };

    window.addEventListener('mousemove', e => {
      mouse.x = e.clientX;
      mouse.y = e.clientY;
      for (let i = 0; i < 3; i++) {
        particles.push({
          x: mouse.x,
          y: mouse.y,
          vx: (Math.random() - 0.5) * 4,
          vy: (Math.random() - 0.5) * 4,
          life: 60
        });
      }
    });

    function animate() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      particles.forEach((p, i) => {
        p.x += p.vx;
        p.y += p.vy;
        p.life--;
        ctx.beginPath();
        ctx.arc(p.x, p.y, p.life / 10, 0, Math.PI * 2);
        ctx.fillStyle = `rgba(0, 212, 255, ${p.life / 60})`;
        ctx.fill();
        if (p.life <= 0) particles.splice(i, 1);
      });
      requestAnimationFrame(animate);
    }
    animate();
  </script>
</body>
</html>
