---
import '../styles/global.css';
const { title } = Astro.props;
---

<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>{title} | GetNexo</title>
  <meta name="description" content="Assistente de vendas 24h com IA, WhatsApp e automação. Zero nuvem cara." />
  <meta name="robots" content="index, follow" />
  		<link rel="canonical" href={new URL(Astro.url.pathname, Astro.site)} />
		<link rel="manifest" href="/manifest.json" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet" />
  <!-- CSP básico + partículas -->
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com;" />
  <style is:global>
    body { overflow-x: hidden; }
    .particles-canvas { position: fixed; inset: 0; pointer-events: none; z-index: -1; }
  </style>
</head>
<body>
  <canvas class="particles-canvas" id="particles"></canvas>

  <header>
    <a href="/" class="logo">GETNEXO</a>
    <nav>
      <a href="/">Início</a>
      <a href="/blog">Blog</a>
      <a href="/admin">Admin</a>
      <a href="/api">API</a>
      <a href="/privacidade">Privacidade</a>
    </nav>
  </header>

  <main>
    <slot />
  </main>

  <footer>
    <p>© {new Date().getFullYear()} GetNexo. Todos os direitos reservados.</p>
    <p>Dados blindados (AES-256) + IA 100% local</p>
  </footer>

  <script is:inline>
    // Partículas simples no mouse (sem dependência externa)
    const canvas = document.getElementById('particles');
    const ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    window.addEventListener('resize', () => {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    });

    const particles = [];
    const mouse = { x: null, y: null };

    window.addEventListener('mousemove', e => {
      mouse.x = e.clientX;
      mouse.y = e.clientY;
      for (let i = 0; i < 3; i++) {
        particles.push({
          x: mouse.x,
          y: mouse.y,
          vx: (Math.random() - 0.5) * 4,
          vy: (Math.random() - 0.5) * 4,
          life: 60
        });
      }
    });

    function animate() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      particles.forEach((p, i) => {
        p.x += p.vx;
        p.y += p.vy;
        p.life--;
        ctx.beginPath();
        ctx.arc(p.x, p.y, p.life / 10, 0, Math.PI * 2);
        ctx.fillStyle = `rgba(0, 212, 255, ${p.life / 60})`;
        ctx.fill();
        if (p.life <= 0) particles.splice(i, 1);
      });
      requestAnimationFrame(animate);
    }
    animate();
  </script>
</body>
</html>
